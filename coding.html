<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Coding</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/business-casual.css" rel="stylesheet">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div class="brand">Coding</div>
    <!-- <div class="address-bar">by Marko Petrovic</div> -->

    <!-- Navigation -->
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- navbar-brand is hidden on larger screens, but visible when the menu is collapsed -->
                <a class="navbar-brand" href="index.html">Business Casual</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="about.html">About Marko</a>
                    </li>
                    <li>
                        <a href="photo_gallery.html">Photo Gallery</a>
                    </li>
                    <li>
                        <a href="visualization.html">Visualization</a>
                    </li>
                    <li>
                        <a href="coding.html">Coding</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <div class="container">

		<!--
		<div class="row">
            <div class="box">
                <div class="col-lg-12">
                    <hr>
                    <h2 class="intro-text text-center">
					    <strong>Coding proj 1</strong>
                    </h2>
                    <hr>
                </div>
                <div class="col-md-6">
					Hello world!
				</div>
                <div class="clearfix"></div>
            </div>
        </div>
		-->

		
		<div class="row">
            <div class="box">
                <div class="col-lg-12">
                    <hr>
                    <h2 class="intro-text text-center">
					    <strong>R Scuba Package Tutorial</strong>
                    </h2>
                    <hr>
                </div>
				<div>
				<a href="./img/ScubaPackage_Tutorial.pdf">This is the tutorial</a> I wrote for using R Scuba Package developed by <a href="http://staffhome.ecm.uwa.edu.au/~00025879/">Adrian Badderley</a> from University of Western Australia.<br/><br/>
				</div>
                <div class="col-md-12">
				</div>
			</div>
		</div>
		
		
		<div class="row">
            <div class="box">
                <div class="col-lg-12">
                    <hr>
                    <h2 class="intro-text text-center">
					    <strong>ArcPy Vector and Raster Clipper</strong>
                    </h2>
                    <hr>
                </div>
				<div>
				This is the ArcPy (Python) script that can be run from ArcMap to do the following:<br/><br/>
					&nbsp;&nbsp;&nbsp;1.&nbsp;&nbsp;&nbsp;Set projections of all feature classes and rasters to the same user-definable coordinate system<br/>
					&nbsp;&nbsp;&nbsp;2.&nbsp;&nbsp;&nbsp;Clip all projected shapefiles using a user-definable clipping feature<br/>
					&nbsp;&nbsp;&nbsp;3.&nbsp;&nbsp;&nbsp;Clip all projected rasters using the same user-definable clipping feature<br/>
					&nbsp;&nbsp;&nbsp;4.&nbsp;&nbsp;&nbsp;Create a file geodatabase with a user-definable name to store all the preprocessed shapefiles<br/><br/><br/>
				</div>
                <div class="col-md-12">
				
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%">
<span style="color: #888888"># ----------------------------------------------------------------------------------------------------------------</span>
<span style="color: #888888"># Name:        GIS3_VectorAndRasterClipper_by_Marko.py</span>
<span style="color: #888888">#</span>
<span style="color: #888888"># Author:      Marko Petrovic</span>
<span style="color: #888888"># ----------------------------------------------------------------------------------------------------------------</span>

<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">os</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">arcpy</span>


<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">getBaseShapefileName</span>(fileNameWithExtensionAndOrPath):
    <span style="color: #DD4422">&quot;&quot;&quot;Extract the base file name (i.e. extension-less and path-less) from a shape file&quot;&quot;&quot;</span>
    <span style="color: #008800; font-weight: bold">return</span> fileNameWithExtensionAndOrPath<span style="color: #333333">.</span>split(os<span style="color: #333333">.</span>sep)[<span style="color: #333333">-</span><span style="color: #0000DD; font-weight: bold">1</span>]<span style="color: #333333">.</span>rstrip(<span style="background-color: #fff0f0">&quot;.shp&quot;</span>)


<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">removeExtension</span>(fileNameWithExtension):
    <span style="color: #DD4422">&quot;&quot;&quot;Remove the extension (last extension if there is more than 1) from a file name&quot;&quot;&quot;</span>
    <span style="color: #008800; font-weight: bold">return</span> os<span style="color: #333333">.</span>path<span style="color: #333333">.</span>splitext(fileNameWithExtension)[<span style="color: #0000DD; font-weight: bold">0</span>]


<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">isSpatialReferenceKnown</span>(feature):
    <span style="color: #DD4422">&quot;&quot;&quot;Return false if the spatial reference is undefined&quot;&quot;&quot;</span>
    desc <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>Describe(feature)
    spatialReference <span style="color: #333333">=</span> desc<span style="color: #333333">.</span>spatialReference
    <span style="color: #008800; font-weight: bold">if</span> spatialReference <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;&quot;</span> <span style="color: #000000; font-weight: bold">or</span> spatialReference <span style="color: #000000; font-weight: bold">is</span> <span style="color: #007020">None</span>:
        <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">False</span>
    <span style="color: #008800; font-weight: bold">return</span> <span style="color: #007020">True</span>


<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">getSpatialReference</span>(feature):
    <span style="color: #DD4422">&quot;&quot;&quot;Get geospatial reference&quot;&quot;&quot;</span>
    desc <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>Describe(feature)
    <span style="color: #008800; font-weight: bold">return</span> desc<span style="color: #333333">.</span>spatialReference


<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">getExtents</span>(featureClass):
    <span style="color: #DD4422">&quot;&quot;&quot;Get the extents rectangle (also known as &#39;Envelope&#39;) from the given feature class&quot;&quot;&quot;</span>
    desc <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>Describe(featureClass)
    <span style="color: #008800; font-weight: bold">return</span> <span style="background-color: #fff0f0">&quot;{xMin} {xMax} {yMin} {yMax}&quot;</span><span style="color: #333333">.</span>format(xMin<span style="color: #333333">=</span>desc<span style="color: #333333">.</span>extent<span style="color: #333333">.</span>XMin,
                                                xMax<span style="color: #333333">=</span>desc<span style="color: #333333">.</span>extent<span style="color: #333333">.</span>XMax,
                                                yMin<span style="color: #333333">=</span>desc<span style="color: #333333">.</span>extent<span style="color: #333333">.</span>YMin,
                                                yMax<span style="color: #333333">=</span>desc<span style="color: #333333">.</span>extent<span style="color: #333333">.</span>YMax)


<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">projectAndClipFeatureClasses</span>(coordinateSystem, originalClippingFeature, projectedClippingFeature, geodatabaseName):
    <span style="color: #DD4422">&quot;&quot;&quot;Convert and clip all shapefiles in the workspace&quot;&quot;&quot;</span>
    fcList <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>ListFeatureClasses()

    <span style="color: #008800; font-weight: bold">if</span> <span style="color: #007020">len</span>(fcList) <span style="color: #333333">==</span> <span style="color: #0000DD; font-weight: bold">0</span>:
        arcpy<span style="color: #333333">.</span>AddWarning(<span style="background-color: #fff0f0">&quot;There&#39;s nothing to convert! Exiting.&quot;</span>)
        <span style="color: #008800; font-weight: bold">return</span>

    arcpy<span style="color: #333333">.</span>AddMessage(<span style="background-color: #fff0f0">&quot;{n} feature classes found...&quot;</span><span style="color: #333333">.</span>format(n<span style="color: #333333">=</span><span style="color: #007020">len</span>(fcList)))

    <span style="color: #008800; font-weight: bold">for</span> featureClass <span style="color: #000000; font-weight: bold">in</span> fcList:

        featureClassPath <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>env<span style="color: #333333">.</span>workspace <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> featureClass

        <span style="color: #008800; font-weight: bold">if</span> featureClassPath <span style="color: #333333">==</span> originalClippingFeature:
            arcpy<span style="color: #333333">.</span>AddMessage(<span style="background-color: #fff0f0">&quot;Clipping feature {name} will not get clipped.&quot;</span><span style="color: #333333">.</span>format(name<span style="color: #333333">=</span>featureClass))
        <span style="color: #008800; font-weight: bold">else</span>:

            <span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> isSpatialReferenceKnown(featureClass):
                <span style="color: #888888"># Define Projection will overwrite the coordinate system information.</span>
                <span style="color: #888888"># We don&#39;t want to do this, because we can&#39;t assume we know the correct projection.</span>
                arcpy<span style="color: #333333">.</span>AddWarning(<span style="background-color: #fff0f0">&quot;Feature class {name} has no projection information! Skipping...&quot;</span><span style="color: #333333">.</span>format(name<span style="color: #333333">=</span>featureClass))
            <span style="color: #008800; font-weight: bold">else</span>:
                <span style="color: #888888"># All preconditions are true</span>
                arcpy<span style="color: #333333">.</span>AddMessage(<span style="background-color: #fff0f0">&quot;Converting {name} from {ref}&quot;</span><span style="color: #333333">.</span>format(name<span style="color: #333333">=</span>featureClass,
                                                                       ref<span style="color: #333333">=</span>getSpatialReference(featureClass)<span style="color: #333333">.</span>Name))

                <span style="color: #888888"># Only used to store the intermediate value</span>
                tempClass <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>env<span style="color: #333333">.</span>workspace <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> geodatabaseName <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> <span style="background-color: #fff0f0">&quot;temp&quot;</span>

                <span style="color: #888888"># Project from one coordinate system to another</span>
                outFeatureClass <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>env<span style="color: #333333">.</span>workspace <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> geodatabaseName <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> featureClass<span style="color: #333333">.</span>rstrip(<span style="background-color: #fff0f0">&quot;.shp&quot;</span>)

                arcpy<span style="color: #333333">.</span>Project_management(featureClass, tempClass, coordinateSystem) <span style="color: #888888"># transform_method</span>
                arcpy<span style="color: #333333">.</span>Clip_analysis(tempClass, projectedClippingFeature, outFeatureClass)
                arcpy<span style="color: #333333">.</span>Delete_management(tempClass)


<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">projectAndClipRasters</span>(coordinateSystem, projectedClippingFeature, geodatabaseName, resamplingType):
    <span style="color: #DD4422">&quot;&quot;&quot;Project and clip all rasters in the workspace&quot;&quot;&quot;</span>
    rasterList <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>ListRasters()

    arcpy<span style="color: #333333">.</span>AddMessage(<span style="background-color: #fff0f0">&quot;{n} raster files found...&quot;</span><span style="color: #333333">.</span>format(n<span style="color: #333333">=</span><span style="color: #007020">len</span>(rasterList)))

    <span style="color: #888888"># raster clip function takes a rectangle (aka &#39;envelope&#39;) instead of a feature class</span>
    clippingRectangle <span style="color: #333333">=</span> getExtents(projectedClippingFeature)

    <span style="color: #008800; font-weight: bold">for</span> raster <span style="color: #000000; font-weight: bold">in</span> rasterList:
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> isSpatialReferenceKnown(raster):
            arcpy<span style="color: #333333">.</span>AddWarning(
                <span style="background-color: #fff0f0">&quot;Feature class {name} has no projection information! Skipping...&quot;</span><span style="color: #333333">.</span>format(name<span style="color: #333333">=</span>raster))
        <span style="color: #008800; font-weight: bold">else</span>:
            arcpy<span style="color: #333333">.</span>AddMessage(<span style="background-color: #fff0f0">&quot;Converting raster {name}...&quot;</span><span style="color: #333333">.</span>format(name<span style="color: #333333">=</span>raster))

            <span style="color: #888888"># tempRaster is only used to store the intermediate value</span>
            tempRaster <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>env<span style="color: #333333">.</span>workspace <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> geodatabaseName <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> <span style="background-color: #fff0f0">&quot;tempRaster&quot;</span>
            outRaster <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>env<span style="color: #333333">.</span>workspace <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> geodatabaseName <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> removeExtension(raster)

            arcpy<span style="color: #333333">.</span>ProjectRaster_management(raster, tempRaster, coordinateSystem, resamplingType)
            arcpy<span style="color: #333333">.</span>Clip_management(tempRaster, clippingRectangle, outRaster)

            <span style="color: #888888"># delete tempRaster</span>
            arcpy<span style="color: #333333">.</span>Delete_management(tempRaster)


<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">main</span>():
    <span style="color: #DD4422">&quot;&quot;&quot;Script&#39;s entry point&quot;&quot;&quot;</span>
    <span style="color: #888888"># Get user arguments</span>
    arcpy<span style="color: #333333">.</span>env<span style="color: #333333">.</span>workspace <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>GetParameterAsText(<span style="color: #0000DD; font-weight: bold">0</span>)   <span style="color: #888888">#</span>
    coordinateSystem <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>GetParameterAsText(<span style="color: #0000DD; font-weight: bold">1</span>)      <span style="color: #888888">#</span>
    clippingFeature <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>GetParameterAsText(<span style="color: #0000DD; font-weight: bold">2</span>)       <span style="color: #888888">#</span>
    geodatabaseName <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>GetParameterAsText(<span style="color: #0000DD; font-weight: bold">3</span>)       <span style="color: #888888"># just the name, without path</span>
    resamplingType <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>GetParameterAsText(<span style="color: #0000DD; font-weight: bold">4</span>)        <span style="color: #888888"># default to &quot;CUBIC&quot;</span>

    arcpy<span style="color: #333333">.</span>AddMessage(<span style="background-color: #fff0f0">&quot;Clipping class = {n}.&quot;</span><span style="color: #333333">.</span>format(n<span style="color: #333333">=</span>clippingFeature))

    <span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> isSpatialReferenceKnown(clippingFeature):
        arcpy<span style="color: #333333">.</span>AddError(<span style="background-color: #fff0f0">&quot;Clipping feature&#39;s projection is not known!&quot;</span>)
        <span style="color: #008800; font-weight: bold">return</span>

    <span style="color: #888888"># Create the geodatabase</span>
    arcpy<span style="color: #333333">.</span>CreateFileGDB_management(arcpy<span style="color: #333333">.</span>env<span style="color: #333333">.</span>workspace, geodatabaseName)

    <span style="color: #888888"># Convert the clipping feature to correct coordinate system</span>
    outClippingFeature <span style="color: #333333">=</span> arcpy<span style="color: #333333">.</span>env<span style="color: #333333">.</span>workspace <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> geodatabaseName <span style="color: #333333">+</span> os<span style="color: #333333">.</span>sep <span style="color: #333333">+</span> getBaseShapefileName(clippingFeature)

    arcpy<span style="color: #333333">.</span>AddMessage(<span style="background-color: #fff0f0">&quot;Projecting clipping feature to {name}&quot;</span><span style="color: #333333">.</span>format(name<span style="color: #333333">=</span>outClippingFeature))
    arcpy<span style="color: #333333">.</span>Project_management(clippingFeature, outClippingFeature, coordinateSystem)

    projectAndClipFeatureClasses(coordinateSystem<span style="color: #333333">=</span>coordinateSystem,
                                 originalClippingFeature<span style="color: #333333">=</span>clippingFeature,
                                 projectedClippingFeature<span style="color: #333333">=</span>outClippingFeature,
                                 geodatabaseName<span style="color: #333333">=</span>geodatabaseName)

    projectAndClipRasters(coordinateSystem<span style="color: #333333">=</span>coordinateSystem,
                          projectedClippingFeature<span style="color: #333333">=</span>outClippingFeature,
                          geodatabaseName<span style="color: #333333">=</span>geodatabaseName,
                          resamplingType<span style="color: #333333">=</span>resamplingType)

    arcpy<span style="color: #333333">.</span>AddMessage(<span style="background-color: #fff0f0">&quot;Done!&quot;</span>)



<span style="color: #008800; font-weight: bold">if</span> __name__ <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;__main__&quot;</span>:
    main()
</pre></div>

				
				</div>
			</div>
		</div>

				
				
				
				
				
		
		<div class="row">
            <div class="box">
                <div class="col-lg-12">
                    <hr>
                    <h2 class="intro-text text-center">
					    <strong>Airline Route Data Processor</strong>
                    </h2>
                    <hr>
                </div>
				<div>
				This is the Python script that I used to extract unique airline routes that include (or don't include) ORD airport in a visualization project.<br/>
				The processed data comes from <a href="https://openflights.org">Open Flights</a>.<br/><br/>
				</div>
                <div class="col-md-12">

<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">csv</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">sys</span>


<span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">AirportInfo</span>():
	<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">__init__</span>(<span style="color: #007020">self</span>, tableId, longName, normalName, code, x, y):
		<span style="color: #007020">self</span><span style="color: #333333">.</span>tableId <span style="color: #333333">=</span> tableId
		<span style="color: #007020">self</span><span style="color: #333333">.</span>longName <span style="color: #333333">=</span> longName
		<span style="color: #007020">self</span><span style="color: #333333">.</span>normalName <span style="color: #333333">=</span> normalName
		<span style="color: #007020">self</span><span style="color: #333333">.</span>code <span style="color: #333333">=</span> code
		<span style="color: #007020">self</span><span style="color: #333333">.</span>x <span style="color: #333333">=</span> x
		<span style="color: #007020">self</span><span style="color: #333333">.</span>y <span style="color: #333333">=</span> y

airports <span style="color: #333333">=</span> {}


<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">loadAirports</span>():
	inputFile <span style="color: #333333">=</span> <span style="color: #007020">open</span>(<span style="background-color: #fff0f0">r&quot;E:\NEIU\GES393\QGIS_Project\airports.dat&quot;</span>, <span style="background-color: #fff0f0">&#39;rt&#39;</span>, encoding<span style="color: #333333">=</span><span style="background-color: #fff0f0">&quot;utf8&quot;</span>)
	<span style="color: #008800; font-weight: bold">try</span>:
		reader <span style="color: #333333">=</span> csv<span style="color: #333333">.</span>reader(inputFile)

		<span style="color: #008800; font-weight: bold">for</span> row <span style="color: #000000; font-weight: bold">in</span> reader:
			tableId <span style="color: #333333">=</span> row[<span style="color: #0000DD; font-weight: bold">0</span>]
			airportLongName <span style="color: #333333">=</span> row[<span style="color: #0000DD; font-weight: bold">1</span>]
			airportNormalName <span style="color: #333333">=</span> row[<span style="color: #0000DD; font-weight: bold">2</span>]

			airportCode <span style="color: #333333">=</span> row[<span style="color: #0000DD; font-weight: bold">4</span>]
			y <span style="color: #333333">=</span> row[<span style="color: #0000DD; font-weight: bold">6</span>]
			x <span style="color: #333333">=</span> row[<span style="color: #0000DD; font-weight: bold">7</span>]

			airportInfo <span style="color: #333333">=</span> AirportInfo(tableId, airportLongName, airportNormalName, airportCode, x, y)
			airports[tableId] <span style="color: #333333">=</span> airportInfo

			<span style="color: #008800; font-weight: bold">print</span>(airportCode)
	<span style="color: #008800; font-weight: bold">finally</span>:
		inputFile<span style="color: #333333">.</span>close()


outputRows <span style="color: #333333">=</span> []
nonOrdFlights <span style="color: #333333">=</span> []

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">loadRoutes</span>():
	inputFile <span style="color: #333333">=</span> <span style="color: #007020">open</span>(<span style="background-color: #fff0f0">r&quot;E:\NEIU\GES393\QGIS_Project\routes.dat&quot;</span>, <span style="background-color: #fff0f0">&#39;rt&#39;</span>, encoding<span style="color: #333333">=</span><span style="background-color: #fff0f0">&quot;utf8&quot;</span>)
	uniqueDestintionsFromORD <span style="color: #333333">=</span> <span style="color: #007020">set</span>()
	uniqueFlightsNonOrd<span style="color: #333333">=</span> <span style="color: #007020">set</span>()

	<span style="color: #008800; font-weight: bold">try</span>:
		reader <span style="color: #333333">=</span> csv<span style="color: #333333">.</span>reader(inputFile)

		<span style="color: #008800; font-weight: bold">for</span> row <span style="color: #000000; font-weight: bold">in</span> reader:
			fromCode <span style="color: #333333">=</span> row[<span style="color: #0000DD; font-weight: bold">2</span>]
			fromTableId <span style="color: #333333">=</span> row[<span style="color: #0000DD; font-weight: bold">3</span>]
			toCode <span style="color: #333333">=</span> row[<span style="color: #0000DD; font-weight: bold">4</span>]
			toTableId <span style="color: #333333">=</span> row[<span style="color: #0000DD; font-weight: bold">5</span>]
			fromAirport <span style="color: #333333">=</span> airports<span style="color: #333333">.</span>get(fromTableId, <span style="color: #007020">None</span>)
			toAirport <span style="color: #333333">=</span> airports<span style="color: #333333">.</span>get(toTableId, <span style="color: #007020">None</span>)

			<span style="color: #008800; font-weight: bold">if</span> (fromAirport <span style="color: #000000; font-weight: bold">is</span> <span style="color: #000000; font-weight: bold">not</span> <span style="color: #007020">None</span>) <span style="color: #000000; font-weight: bold">and</span> (toAirport <span style="color: #000000; font-weight: bold">is</span> <span style="color: #000000; font-weight: bold">not</span> <span style="color: #007020">None</span>):
				<span style="color: #008800; font-weight: bold">if</span> fromCode <span style="color: #333333">==</span> <span style="background-color: #fff0f0">&quot;ORD&quot;</span>:
					<span style="color: #008800; font-weight: bold">if</span> toCode <span style="color: #000000; font-weight: bold">not</span> <span style="color: #000000; font-weight: bold">in</span> uniqueDestintionsFromORD:
						uniqueDestintionsFromORD<span style="color: #333333">.</span>add(toCode)

						<span style="color: #888888"># Example string: Manaus, ORD, MAO,&quot;LINESTRING(-87.9073 41.9742, -60.0463 -3.0358)&quot;</span>
						outputRows<span style="color: #333333">.</span>append(<span style="background-color: #fff0f0">&quot;{label}, {origCode}, {destCode},</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\&quot;</span><span style="background-color: #fff0f0">LINESTRING({origX} {origY}, {destX} {destY})</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\&quot;\n</span><span style="background-color: #fff0f0">&quot;</span><span style="color: #333333">.</span>format(
							label<span style="color: #333333">=</span>toAirport<span style="color: #333333">.</span>normalName,
							origCode<span style="color: #333333">=</span>fromCode,
							destCode<span style="color: #333333">=</span>toCode,
							origX<span style="color: #333333">=</span>fromAirport<span style="color: #333333">.</span>x,
							origY<span style="color: #333333">=</span>fromAirport<span style="color: #333333">.</span>y,
							destX<span style="color: #333333">=</span>toAirport<span style="color: #333333">.</span>x,
							destY<span style="color: #333333">=</span>toAirport<span style="color: #333333">.</span>y
						))
				<span style="color: #008800; font-weight: bold">elif</span> toCode <span style="color: #333333">!=</span> <span style="background-color: #fff0f0">&quot;ORD&quot;</span>:

					key1 <span style="color: #333333">=</span> (toCode, fromCode)
					key2 <span style="color: #333333">=</span> (fromCode, toCode)
					<span style="color: #008800; font-weight: bold">if</span>(key1 <span style="color: #000000; font-weight: bold">not</span> <span style="color: #000000; font-weight: bold">in</span> uniqueFlightsNonOrd) <span style="color: #000000; font-weight: bold">and</span> (key2 <span style="color: #000000; font-weight: bold">not</span> <span style="color: #000000; font-weight: bold">in</span> uniqueFlightsNonOrd):
						uniqueFlightsNonOrd<span style="color: #333333">.</span>add(key1)

						nonOrdFlights<span style="color: #333333">.</span>append(<span style="background-color: #fff0f0">&quot;{label}, {origCode}, {destCode},</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\&quot;</span><span style="background-color: #fff0f0">LINESTRING({origX} {origY}, {destX} {destY})</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\&quot;\n</span><span style="background-color: #fff0f0">&quot;</span><span style="color: #333333">.</span>format(
							label<span style="color: #333333">=</span>toAirport<span style="color: #333333">.</span>normalName,
							origCode<span style="color: #333333">=</span>fromCode,
							destCode<span style="color: #333333">=</span>toCode,
							origX<span style="color: #333333">=</span>fromAirport<span style="color: #333333">.</span>x,
							origY<span style="color: #333333">=</span>fromAirport<span style="color: #333333">.</span>y,
							destX<span style="color: #333333">=</span>toAirport<span style="color: #333333">.</span>x,
							destY<span style="color: #333333">=</span>toAirport<span style="color: #333333">.</span>y
						))

				<span style="color: #888888">#print(airportCode)</span>
	<span style="color: #008800; font-weight: bold">finally</span>:
		inputFile<span style="color: #333333">.</span>close()

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">outputRouteGeometry</span>(stringList, <span style="color: #007020">file</span>):
	myFile <span style="color: #333333">=</span> <span style="color: #007020">open</span>(<span style="color: #007020">file</span>, <span style="background-color: #fff0f0">&quot;w&quot;</span>)
	<span style="color: #008800; font-weight: bold">for</span> line <span style="color: #000000; font-weight: bold">in</span> stringList:
		myFile<span style="color: #333333">.</span>write(line)
	myFile<span style="color: #333333">.</span>close()


loadAirports()
loadRoutes()
outputRouteGeometry(outputRows, <span style="background-color: #fff0f0">r&quot;E:\NEIU\GES393\QGIS_Project\lineGeometry-unique2.csv&quot;</span>)
outputRouteGeometry(nonOrdFlights, <span style="background-color: #fff0f0">r&quot;E:\NEIU\GES393\QGIS_Project\lineGeometry-nonORD.csv&quot;</span>)
</pre></div>

	<div>
		<br/><br/><br/>
		<div align="right">Python syntax highlighting done using <a href="http://hilite.me/">http://hilite.me/</a>.</div>
	</div>
				

					<!--
					<p>This is a great place to introduce your company or project and describe what you do.</p>
                    <p>Lid est laborum dolo rumes fugats untras. Etharums ser quidem rerum facilis dolores nemis omnis fugats vitaes nemo minima rerums unsers sadips amets.</p>
                    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
                --></div>
                <div class="clearfix"></div>
            </div>
        </div>
        <!-- <div class="row">
            <div class="box">
                <div class="col-lg-12">
                    <hr>
                    <h2 class="intro-text text-center">Thank you and
                        <strong>please come again</strong>
                    </h2>
                    <hr>
                </div>
                <div class="col-sm-4 text-center">
                    <img class="img-responsive" src="http://placehold.it/750x450" alt="">
                    <h3>John Smith
                        <small>Job Title</small>
                    </h3>
                </div>
                <div class="col-sm-4 text-center">
                    <img class="img-responsive" src="http://placehold.it/750x450" alt="">
                    <h3>John Smith
                        <small>Job Title</small>
                    </h3>
                </div>
                <div class="col-sm-4 text-center">
                    <img class="img-responsive" src="http://placehold.it/750x450" alt="">
                    <h3>John Smith
                        <small>Job Title</small>
                    </h3>
                </div>
                <div class="clearfix"></div>
            </div>
        </div> -->

    </div>
	
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <p>Copyright &copy; 2017. Free to re-use for academic purposes.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

</body>

</html>
